<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>Oracle数据库Session锁住解决方案</title>
      <link href="/2019/04/22/Oracle%E6%95%B0%E6%8D%AE%E5%BA%93Session%E9%94%81%E4%BD%8F%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/"/>
      <url>/2019/04/22/Oracle%E6%95%B0%E6%8D%AE%E5%BA%93Session%E9%94%81%E4%BD%8F%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/</url>
      
        <content type="html"><![CDATA[<p>ORACLE EBS操作某一个FORM界面，或者后台数据库操作某一个表时发现一直出于”假死”状态，可能是该表被某一用户锁定，导致其他用户无法继续操作<br><a id="more"></a></p><h2 id="Session锁住出现的状况"><a href="#Session锁住出现的状况" class="headerlink" title="Session锁住出现的状况"></a>Session锁住出现的状况</h2><p>查询语句执行时间变长，或者卡死</p><h2 id="查看当前Oracle数据库Session使用状况"><a href="#查看当前Oracle数据库Session使用状况" class="headerlink" title="查看当前Oracle数据库Session使用状况"></a>查看当前Oracle数据库Session使用状况</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> S.USERNAME,</span><br><span class="line">       L.OBJECT_ID,</span><br><span class="line">       L.SESSION_ID,</span><br><span class="line">       S.SERIAL#,</span><br><span class="line">       L.ORACLE_USERNAME,</span><br><span class="line">       L.OS_USER_NAME,</span><br><span class="line">       L.PROCESS</span><br><span class="line">  <span class="keyword">FROM</span> V$LOCKED_OBJECT L, V$<span class="keyword">SESSION</span> S</span><br><span class="line"> <span class="keyword">WHERE</span> L.SESSION_ID = S.SID;</span><br></pre></td></tr></table></figure><h2 id="杀掉个用户的Oracle-Session"><a href="#杀掉个用户的Oracle-Session" class="headerlink" title="杀掉个用户的Oracle Session"></a>杀掉个用户的Oracle Session</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="string">'alter system kill session '</span> || <span class="keyword">CHR</span>(<span class="number">39</span>) || L.SESSION_ID || <span class="string">','</span> ||</span><br><span class="line">       S.SERIAL# || <span class="keyword">CHR</span>(<span class="number">39</span>) || <span class="string">';'</span></span><br><span class="line">  <span class="keyword">FROM</span> V$LOCKED_OBJECT L, V$<span class="keyword">SESSION</span> S</span><br><span class="line">   <span class="keyword">AND</span> L.OS_USER_NAME <span class="keyword">LIKE</span> <span class="string">'%minus%'</span></span><br></pre></td></tr></table></figure><blockquote><p>OS_USER_NAME 为可增加查询条件</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> Oracle </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Oracle </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>删除Oracle用户和表空间</title>
      <link href="/2019/04/22/%E5%88%A0%E9%99%A4Oracle%E7%94%A8%E6%88%B7%E5%8F%8A%E8%A1%A8%E7%A9%BA%E9%97%B4/"/>
      <url>/2019/04/22/%E5%88%A0%E9%99%A4Oracle%E7%94%A8%E6%88%B7%E5%8F%8A%E8%A1%A8%E7%A9%BA%E9%97%B4/</url>
      
        <content type="html"><![CDATA[<p>如何在Oracle中删除用户和表空间？</p><p><fancybox><br><img src="https://ws4.sinaimg.cn/large/006tNc79gy1g2bihwvebvj30ue0godgg.jpg" alt=""><br></fancybox><br><a id="more"></a></p><h2 id="操作用户"><a href="#操作用户" class="headerlink" title="操作用户"></a>操作用户</h2><h3 id="查看Oracle所有用户"><a href="#查看Oracle所有用户" class="headerlink" title="查看Oracle所有用户"></a>查看Oracle所有用户</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> username <span class="keyword">from</span> dba_users</span><br></pre></td></tr></table></figure><h3 id="删除指定Oracle用户"><a href="#删除指定Oracle用户" class="headerlink" title="删除指定Oracle用户"></a>删除指定Oracle用户</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">drop</span> <span class="keyword">user</span> ×× <span class="keyword">cascade</span></span><br></pre></td></tr></table></figure><blockquote><p>删除了数据库用户，只是删除了该用户下下的Schema Objects，是不会删除该用户拥有的表空间。</p></blockquote><h2 id="操作Oracle表空间"><a href="#操作Oracle表空间" class="headerlink" title="操作Oracle表空间"></a>操作Oracle表空间</h2><h3 id="查看Oracle所有表空间"><a href="#查看Oracle所有表空间" class="headerlink" title="查看Oracle所有表空间"></a>查看Oracle所有表空间</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> tablespace_name <span class="keyword">from</span> dba_tablespaces;</span><br></pre></td></tr></table></figure><h3 id="删除Oracle所有表空间"><a href="#删除Oracle所有表空间" class="headerlink" title="删除Oracle所有表空间"></a>删除Oracle所有表空间</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLESPACE</span> tablespace_name <span class="keyword">INCLUDING</span> <span class="keyword">CONTENTS</span> <span class="keyword">AND</span> <span class="keyword">DATAFILES</span>;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> Oracle </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Oracle </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
